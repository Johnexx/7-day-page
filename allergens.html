<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>33 Degrees Menu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    h2 {
      margin-top: 40px;
      color: #1a3b8d;
      border-bottom: 2px solid #ccc;
      padding-bottom: 5px;
    }
    .allergen-filters {
      margin-bottom: 30px;
      text-align: center;
    }
    .menu-category {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    .menu-item {
      border: 1px solid #ccc;
      border-left: 8px solid transparent;
      background: white;
      padding: 15px;
      transition: background 0.3s;
      cursor: pointer;
    }
    .safe {
      border-left-color: green;
      background: #e5ffe5;
    }
    .unsafe {
      border-left-color: red;
      background: #ffe5e5;
    }
    .ingredients {
      display: none;
      margin-top: 10px;
      font-size: 0.9em;
    }
    .ingredients span.allergen {
      font-weight: bold;
      color: red;
    }
    .price {
      float: right;
      font-weight: bold;
    }
    .clear {
      clear: both;
    }
  </style>
</head>
<body>

  <h1>33 Degrees Esperance Menu</h1>

  <div class="allergen-filters">
    <label><input type="checkbox" value="seafood"> Seafood</label>
    <label><input type="checkbox" value="peanuts"> Peanuts</label>
    <label><input type="checkbox" value="garlic"> Garlic</label>
    <label><input type="checkbox" value="dairy"> Dairy</label>
    <label><input type="checkbox" value="gluten"> Gluten</label>
  </div>

  <div id="menu"></div>

  <script>
    const allergens = new Set();

    const menuData = {
      "Entree": [
        { name: "Garlic Bread", description: "roasted garlic butter on a toasted baguette (v)", price: 12, ingredients: ["gluten", "garlic", "butter"] },
        { name: "Bowl of Chips", description: "side of tomato sauce (v, ve, df)", price: 12, ingredients: ["gluten"] },
        { name: "Sweet Potato Fries", description: "side of sweet chilli sauce (v, ve, df)", price: 15, ingredients: ["gluten"] },
        { name: "Salt and Pepper Calamari", description: "lightly fried in a salt and pepper mix, house salad, tartare sauce (dfo)", price: 18, ingredients: ["seafood", "garlic", "gluten"] },
        { name: "Loaded Chips", description: "loaded with cheesy sauce, bacon, spring onion, gravy", price: 18, ingredients: ["garlic", "gluten"] },
        { name: "Mango and Avo Bruchetta", description: "mango and red chilli salsa, and avocado, served on toasted vienna (gfo, v, ve"), price: 16, ingredients: ["gluten", "garlic", "gluten"] },
        
      ],
      "Mains": [
        { name: "Fish & Chips", description: "Beer-battered fish, chips, tartare.", price: 28, ingredients: ["seafood", "gluten", "dairy"] },
        { name: "Steak Sandwich", description: "Rump steak with caramelised onions.", price: 26, ingredients: ["gluten", "onion", "dairy"] }
      ],
      "Burgers": [
        { name: "Classic Beef Burger", description: "Beef patty, cheese, pickles, aioli.", price: 24, ingredients: ["gluten", "dairy", "garlic"] },
        { name: "Chicken Burger", description: "Crispy chicken, slaw, sriracha mayo.", price: 25, ingredients: ["gluten", "garlic", "dairy"] }
      ],
      "Salads": [
        { name: "Caesar Salad", description: "Cos, bacon, egg, parmesan, croutons.", price: 20, ingredients: ["egg", "dairy", "gluten"] }
      ],
      "Sauces": [
        { name: "Mushroom Sauce", description: "Rich creamy mushroom gravy.", price: 4, ingredients: ["dairy", "garlic"] }
      ],
      "Extras": [
        { name: "Chips", description: "Crispy seasoned fries.", price: 9, ingredients: ["gluten"] }
      ],
      "Kids": [
        { name: "Kids Nuggets & Chips", description: "Chicken nuggets with chips.", price: 14, ingredients: ["gluten", "dairy"] }
      ],
      "Desserts": [
        { name: "Sticky Date Pudding", description: "Warm pudding with butterscotch.", price: 12, ingredients: ["gluten", "dairy"] }
      ]
    };

    function highlightAllergens(ingredients) {
      return ingredients.map(ing => {
        return allergens.has(ing.toLowerCase()) ?
          `<span class="allergen">${ing}</span>` : ing;
      }).join(", ");
    }

    function renderMenu() {
      const container = document.getElementById('menu');
      container.innerHTML = "";

      for (const category in menuData) {
        const section = document.createElement('div');
        section.innerHTML = `<h2>${category}</h2><div class="menu-category"></div>`;
        const grid = section.querySelector('.menu-category');

        menuData[category].forEach(item => {
          const lowerIngredients = item.ingredients.map(i => i.toLowerCase());
          const isSafe = !lowerIngredients.some(i => allergens.has(i));
          const itemDiv = document.createElement('div');
          itemDiv.className = `menu-item ${isSafe ? "safe" : "unsafe"}`;
          itemDiv.innerHTML = `
            <div><strong>${item.name}</strong><span class="price">$${item.price}</span></div>
            <div class="clear"></div>
            <p>${item.description}</p>
            <div class="ingredients">Ingredients: ${highlightAllergens(item.ingredients)}</div>
          `;

          if (!isSafe) {
            itemDiv.addEventListener('click', function () {
              const ingredients = this.querySelector('.ingredients');
              ingredients.style.display = ingredients.style.display === 'block' ? 'none' : 'block';
            });
          }

          grid.appendChild(itemDiv);
        });

        container.appendChild(section);
      }
    }

    document.querySelectorAll('.allergen-filters input').forEach(cb => {
      cb.addEventListener('change', () => {
        if (cb.checked) allergens.add(cb.value);
        else allergens.delete(cb.value);
        renderMenu();
      });
    });

    renderMenu();
  </script>

</body>
</html>
