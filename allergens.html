
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>33 Degrees Menu</title>
  <style>
    @font-face {
      font-family: 'Anton';
      src: url('/fonts/Anton-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #E8E7DC;
    }

    h1, h2 {
      font-family: 'Anton', Arial, sans-serif;
      color: #1a3b8d;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 3rem;
    }

    h2 {
      margin-top: 40px;
      border-bottom: 2px solid #ccc;
      padding-bottom: 5px;
      font-size: 2rem;
    }

    .allergen-filters {
      margin-bottom: 30px;
      text-align: center;
    }

    .menu-category {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .menu-item {
      border: 1px solid #ccc;
      border-left: 8px solid transparent;
      background: white;
      padding: 15px;
      transition: background 0.3s;
      cursor: pointer;
    }

    .safe {
      border-left-color: green;
      background: #e5ffe5;
    }

    .unsafe {
      border-left-color: red;
      background: #ffe5e5;
    }

    .ingredients, .dietary-labels {
      display: none;
      margin-top: 10px;
      font-size: 0.9em;
    }

    .ingredients span.allergen {
      font-weight: bold;
      color: red;
    }

    .price {
      float: right;
      font-weight: bold;
    }

    .clear {
      clear: both;
    }

    .visible {
      display: block !important;
    }

    .dietary-tag {
      display: inline-block;
      background: #1a3b8d;
      color: white;
      padding: 2px 6px;
      margin-right: 5px;
      font-size: 0.75em;
      border-radius: 4px;
    }

    .removal-note {
      font-style: italic;
      color: #555;
      font-size: 0.8em;
      margin-top: 5px;
    }
  </style>
</head>
<body>

  <h1>33 Degrees Allergen Menu</h1>

  <div class="allergen-filters">
    <label><input type="checkbox" value="peanuts"> Peanuts</label>    
    <label><input type="checkbox" value="tree nuts"> Tree Nuts</label>
    <label><input type="checkbox" value="dairy"> Dairy</label>
    <label><input type="checkbox" value="garlic"> Garlic</label>
    <label><input type="checkbox" value="gluten"> Gluten</label>
    <label><input type="checkbox" value="soy"> Soy</label>
    <label><input type="checkbox" value="fish"> Fish</label>
    <label><input type="checkbox" value="shellfish"> Shellfish</label>
    <label><input type="checkbox" value="Sesame"> Sesame seeds</label>
    <label><input type="checkbox" value="peanuts"> Pescetarian</label>
    <label><input type="checkbox" value="vegetarian"> Vegetarian</label>
    <label><input type="checkbox" value="vegan"> Vegan</label>
  </div>

  <div id="menu"></div>

  <script>
const menuData = {
  "Entree": [
    {
      "name": "Garlic Bread",
      "description": "roasted garlic butter on a toasted baguette (v)",
      "price": 12,
      "ingredients": [
        "gluten",
        "garlic",
        "butter"
      ],
      "dietary": "V, GFO",
      "removables": {
        "GFO": [
          "bread"
        ]
      }
    },
    {
      "name": "Bowl of Chips",
      "description": "side of tomato sauce (v, ve, df)",
      "price": 12,
      "ingredients": [
        "gluten"
      ],
      "dietary": "V, Ve, DF"
    },
    {
      "name": "Sweet Potato Fries",
      "description": "side of sweet chilli sauce (v, ve, df)",
      "price": 15,
      "ingredients": [
        "gluten"
      ],
      "dietary": "V, Ve, DF"
    },
    {
      "name": "Salt and Pepper Calamari",
      "description": "lightly fried in a salt and pepper mix, house salad, tartare sauce (dfo)",
      "price": 18,
      "ingredients": [
        "seafood",
        "garlic",
        "gluten"
      ],
      "dietary": "DFO",
      "removables": {
        "DFO": [
          "tartare sauce"
        ]
      }
    },
    {
      "name": "Loaded Chips",
      "description": "loaded with cheesy sauce, bacon, spring onion, gravy",
      "price": 18,
      "ingredients": [
        "garlic",
        "gluten"
      ]
    },
    {
      "name": "Mango and Avo Bruschetta",
      "description": "mango and red chilli salsa, and avocado, served on toasted vienna (gfo, v, ve)",
      "price": 16,
      "ingredients": [
        "gluten",
        "garlic",
        "gluten"
      ],
      "dietary": "GFO, V, Ve",
      "removables": {
        "GFO": [
          "bread"
        ]
      }
    }
  ],
  "Mains": [
    {
      "name": "Brisket Loaded Nachos",
      "description": "corn chips, smoked bbq brisket, black beans, cheesy sauce, guacamole, sour cream, jalapenos, mango salsa, crispy onion (gfo)",
      "price": 29,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Crumbed Pink Snapper",
      "description": "polenta and black olive chips, roasted cauliflower, cauliflower puree, dill and smoked paprika hollandaise",
      "price": 36,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Chicken Schnitzel",
      "description": "house salad, chips, choice of sauce",
      "price": 34,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Beef Schnitzel",
      "description": "house salad, chips, choice of sauce",
      "price": 35,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Chicken Parmi",
      "description": "house salad, chips",
      "price": 38,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Beef Parmi",
      "description": "house salad, chips",
      "price": 39,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Jack Daniels BBQ Glazed Pork Ribs",
      "description": "house salad, chips (gfo, df)",
      "price": 45,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "300g Scotch Fillet",
      "description": "house salad, chips, choice of sauce (gfo, dfo)",
      "price": 47,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Pistachio Crusted Salmon",
      "description": "atlantic salmon, pistachio crust, moroccan spiced couscous, asparagus, hollandaise, sweet potato puree (dfo)",
      "price": 36,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Creamy Prawn Fettuccine",
      "description": "lemon and dill cream sauce, pan fried prawns, crispy capers, toasted pine nuts, tossed in fettuccine",
      "price": 32,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Salt and Pepper Calamari (Main)",
      "description": "lightly fried in salt and pepper mix, chips, house salad, tartare sauce (dfo)",
      "price": 29,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Fish and Chips",
      "description": "crispy battered fish, chips, tartare sauce",
      "price": 35,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Smoked Lamb Backstrap",
      "description": "cherry wood smoked lamb, mash potato, green beans, crispy leeks and shallots, fig jus (gfo)",
      "price": null,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    }
  ],
  "Burgers": [
    {
      "name": "Smashed Beef Burger",
      "description": "two smashed beef patties, bacon, cheese, cos lettuce, 33 degrees burger sauce (gfo)",
      "price": 28,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Southern Fried Chicken Burger",
      "description": "chicken tenders coated in southern style herbs and spices, bacon, cheese, slaw, chipotle mayo",
      "price": 27,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Halloumi Hash Burger",
      "description": "halloumi and potato hash brown, mushrooms, kale aioli, rocket and sriracha (v)",
      "price": 26,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Smoked Brisket Burger",
      "description": "smokey pulled bbq brisket, sauerkraut, fried onion, corn aioli (gfo)",
      "price": 28,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    }
  ],
  "Salads": [
    {
      "name": "Pear and Walnut Salad",
      "description": "rocket, pickled pear, toasted walnuts, blue cheese, carrot, in a honey dijon dressing (gf, dfo, v)",
      "price": 27,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Nicoise Salad",
      "description": "cos lettuce, black olives, sundried tomatoes, green beans, salad potatoes, soft boiled egg, dill dressing",
      "price": 27,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Buddha Bowl",
      "description": "roasted sweet potato, pickled red cabbage, cucumber, carrot, edamame beans, avocado, wild rice, quinoa, seeds (ve, gf)",
      "price": 26,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    }
  ],
  "Kids": [
    {
      "name": "Kids Cheeseburger",
      "description": "served with chips, side of tomato sauce (gfo)",
      "price": 16,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Kids Fish & Chips",
      "description": "side of tomato sauce (gfo)",
      "price": 14,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Kids Pasta",
      "description": "napolitana sauce",
      "price": 13,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Kids Chicken Schnitzel",
      "description": "served with chips, side of tomato sauce",
      "price": 14,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Kids Chicken Parmi",
      "description": "served with chips, side of tomato sauce",
      "price": 16,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Vanilla Ice Cream",
      "description": "topped with sprinkles",
      "price": 8,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    }
  ],
  "Desserts": [
    {
      "name": "Sticky Date Pudding",
      "description": "served with butterscotch sauce and vanilla ice cream (gf)",
      "price": 14,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Chocolate and Almond Cake",
      "description": "flourless chocolate and almond cake, toasted almonds, vanilla ice cream (gf, v)",
      "price": 14,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    },
    {
      "name": "Vanilla Panna Cotta",
      "description": "creamy vanilla bean panna cotta, shortbread, mango texture (gfo)",
      "price": 13,
      "ingredients": [],
      "dietary": "",
      "removables": {}
    }
  ]
};

    const allergens = new Set();

    function highlightAllergens(ingredients) {
      return ingredients.map(ing => {
        return allergens.has(ing.toLowerCase()) ?
          `<span class="allergen">${ing}</span>` : ing;
      }).join(", ");
    }

    function renderMenu() {
      const container = document.getElementById('menu');
      container.innerHTML = "";

      for (const category in menuData) {
        const section = document.createElement('div');
        section.innerHTML = `<h2>${category}</h2><div class="menu-category"></div>`;
        const grid = section.querySelector('.menu-category');

        menuData[category].forEach(item => {
          const lowerIngredients = item.ingredients.map(i => i.toLowerCase());
          const isSafe = !lowerIngredients.some(i => allergens.has(i));
          const itemDiv = document.createElement('div');
          itemDiv.className = `menu-item ${isSafe ? "safe" : "unsafe"}`;

          let dietaryHTML = "";
          if (item.dietary) {
            const tags = item.dietary.split(",").map(tag => tag.trim());
            tags.forEach(tag => {
              dietaryHTML += `<span class="dietary-tag">${tag}</span>`;
              if (tag.endsWith("O") && item.removables && item.removables[tag]) {
                dietaryHTML += `<div class="removal-note">Remove: ${item.removables[tag].join(", ")}</div>`;
              }
            });
          }

          itemDiv.innerHTML = `
            <div><strong>${item.name}</strong><span class="price">${item.price !== null ? "$" + item.price : "Market Price"}</span></div>
            <div class="clear"></div>
            <p>${item.description}</p>
            <div class="dietary-labels">${dietaryHTML}</div>
            <div class="ingredients">Ingredients: ${highlightAllergens(item.ingredients)}</div>
          `;

          itemDiv.addEventListener('click', function () {
            this.querySelector('.ingredients').classList.toggle('visible');
            const labels = this.querySelector('.dietary-labels');
            if (labels) labels.classList.toggle('visible');
          });

          grid.appendChild(itemDiv);
        });

        container.appendChild(section);
      }
    }

    document.querySelectorAll('.allergen-filters input').forEach(cb => {
      cb.addEventListener('change', () => {
        if (cb.checked) allergens.add(cb.value);
        else allergens.delete(cb.value);
        renderMenu();
      });
    });

    renderMenu();
  </script>

</body>
</html>
